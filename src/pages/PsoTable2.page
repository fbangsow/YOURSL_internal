<apex:page sidebar="false" name="PSOTable2" controller="PsoTable2Controller">
	<apex:includeScript value="{!URLFOR($Resource.jQuery_2_2_0)}"/>
	<apex:includeScript value="{!URLFOR($Resource.StreamingApiScripts,'json2.js')}"/>
	<apex:includeScript value="{!URLFOR($Resource.StreamingApiScripts,'Cometd.js')}"/>
	<apex:includeScript value="{!URLFOR($Resource.StreamingApiScripts,'jquery.cometd.js')}"/>
	<apex:includeScript value="{!URLFOR($Resource.jQuery_ui_1_11_4,'jquery-ui.min.js')}"/>
	<apex:includeScript value="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js" />
	<apex:includeScript value="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular-cookies.min.js" />
	<apex:includeScript value="{!URLFOR($Resource.PsoTable2,'PsoTable2.js')}"/>

	<link rel="stylesheet" href="{!URLFOR($Resource.jQuery_ui_1_11_4,'jquery-ui.min.css')}" />
	<link rel="stylesheet" href="{!URLFOR($Resource.PsoTable2,'PsoTable2.css')}" />

	<apex:form>
		<div data-ng-app="PsoTable2" data-ng-controller="PsoTable2" id="pso-table">
			<apex:pageBlock title="Loading" html-data-ng-if="status.loading">
			</apex:pageBlock>

			<apex:pageBlock html-data-ng-if="!status.loading" title="Apply filters">
				<div class="ui-helper-clearfix">
					<section id="opportunities-filter">
						<h3><label for="selectedOpportunities">Select opportunities:</label></h3>

						<select multiple="multiple" name="selectedOpportunities" id="selectedOpportunities" ng-model="viewState.selectedOpportunities" ng-attr-size="{{ viewState.selectedOpportunitiesSize }}">
							<optgroup ng-repeat="customer in opportunitiesFilter.Customers | filter : opportunitiesFilter.customerMatchesFilter" label="{{ customer.AccountName }}" ng-click="opportunitiesFilter.events.accountClicked(customer, $event)">
								<option ng-repeat="project in customer.Projects | filter : opportunitiesFilter.projectMatchesFilter" value="{{ project.OpportunityId }}">
									{{ project.OpportunityName }}
								</option>
							</optgroup>
						</select>

						<input type="search" placeholder="Filter opportunities" ng-model="viewState.opportunitiesFilterText" ng-change="opportunitiesFilter.removeFilteredOpportunitiesFromSelection()" />

						<a href="#" ng-click="opportunitiesFilter.selectAllOpportunities()">Select all</a>
						<a href="#" ng-click="opportunitiesFilter.clearSelectedOpportunities()">Clear</a>
					</section>
				</div>
			</apex:pageBlock>
		</div>
	</apex:form>
</apex:page>